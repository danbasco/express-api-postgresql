info:
  name: PostGres-Express API
  _postman_id: 8b5c3d41-9d3a-48b7-a4b1-3b123456abcd
  schema: https://schema.getpostman.com/json/collection/v2.1.0/collection.json

variable:
  - key: baseUrl
    value: http://atv-parte1-fullstack.danielvasconcelos.me/
  - key: token
    value: ""
  - key: bookId
    value: ""

item:
  - name: Cadastro
    item:
      - name: Cadastro Bem Sucedido
        request:
          method: POST
          header:
            - key: Content-Type
              value: application/json
          body:
            mode: raw
            raw: |
              {
                "name": "daniel123",
                "email": "daniel123@email.com",
                "password": "Daniel123!"
              }
          url:
            raw: "{{baseUrl}}users/register"

      - name: Erro: Senha Invalida
        request:
          method: POST
          header:
            - key: Content-Type
              value: application/json
          body:
            mode: raw
            raw: |
              {
                "name": "daniel123",
                "email": "daniel123@email.com",
                "password": "123"
              }
          url:
            raw: "{{baseUrl}}users/register"

      - name: Erro: Email repetido
        request:
          method: POST
          header:
            - key: Content-Type
              value: application/json
          body:
            mode: raw
            raw: |
              {
                "name": "daniel123",
                "email": "daniel123@email.com",
                "password": "Daniel123!"
              }
          url:
            raw: "{{baseUrl}}users/register"

      - name: Erro: Email invalido
        request:
          method: POST
          header:
            - key: Content-Type
              value: application/json
          body:
            mode: raw
            raw: |
              {
                "name": "daniel123",
                "email": "not-an-email",
                "password": "Daniel123!"
              }
          url:
            raw: "{{baseUrl}}users/register"

      - name: Erro: Requisição mal formatada
        request:
          method: POST
          header:
            - key: Content-Type
              value: application/json
          body:
            mode: raw
            raw: |
              {
                "email": "missingname@example.com"
              }
          url:
            raw: "{{baseUrl}}users/register"

  - name: Login
    item:
      - name: Login Bem Sucedido
        request:
          method: POST
          header:
            - key: Content-Type
              value: application/json
          body:
            mode: raw
            raw: |
              {
                "email": "daniel123@email.com",
                "password": "Daniel123!"
              }
          url:
            raw: "{{baseUrl}}users/login"

      - name: Erro: Senha invalida
        request:
          method: POST
          header:
            - key: Content-Type
              value: application/json
          body:
            mode: raw
            raw: |
              {
                "email": "daniel123@email.com",
                "password": "wrongpassword"
              }
          url:
            raw: "{{baseUrl}}users/login"

      - name: Erro: Email Invalido
        request:
          method: POST
          header:
            - key: Content-Type
              value: application/json
          body:
            mode: raw
            raw: |
              {
                "email": "not-an-email",
                "password": "somepassword"
              }
          url:
            raw: "{{baseUrl}}users/login"

      - name: Erro: Requisição mal formatada
        request:
          method: POST
          header:
            - key: Content-Type
              value: application/json
          body:
            mode: raw
            raw: |
              {
                "password": "noemailprovided"
              }
          url:
            raw: "{{baseUrl}}users/login"

  - name: Protected
    item:
      - name: Rota Protected Conectada
        request:
          method: GET
          header:
            - key: Authorization
              value: "Bearer {{token}}"
            - key: Accept
              value: application/json
          url:
            raw: "{{baseUrl}}protected"

      - name: Acesso Sem Token
        request:
          method: GET
          header:
            - key: Accept
              value: application/json
          url:
            raw: "{{baseUrl}}protected"

      - name: Token Invalido
        request:
          method: GET
          header:
            - key: Authorization
              value: "Bearer invalid.token.here"
            - key: Accept
              value: application/json
          url:
            raw: "{{baseUrl}}protected"

  - name: Books
    item:
      - name: Criar Livro Bem Sucedido
        request:
          method: POST
          header:
            - key: Authorization
              value: "Bearer {{token}}"
            - key: Content-Type
              value: application/json
          body:
            mode: raw
            raw: |
              {
                "title": "Crime e Castigo",
                "author": "Fyodor Dostoevsky",
                "description": "A psychological drama about morality and redemption.",
                "genre": ["Romance", "Fiction"],
                "status": "READING"
              }
          url:
            raw: "{